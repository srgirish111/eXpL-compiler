MOV R1, SP
MOV R2, 5
SUB R1, R2
MOV R2, "Write"
MOV R1, [R1]
EQ R2, R1
JNZ R2, 26
MOV R2, "Read"
EQ R2, R1
JNZ R2, 76
MOV R2, "Exit"
EQ R2, R1
JNZ R2, 126
MOV R1, SP //write
MOV R2, 4
SUB R1, R2
MOV R2, [R1]
ADD R1, 1
MOV R3, [R1]
ADD R1, 1
MOV R4, [R1]
MOV R5, 5
PUSH R5
PUSH R2
PUSH R3
PUSH R4
PUSH R5
INT 7
POP R1
POP R2
POP R2
POP R2
POP R2
MOV R2, SP
MOV R3, 1
SUB R2, R3
MOV [R2], R1
RET
MOV R1, SP //read
MOV R2, 4
SUB R1, R2
MOV R2, [R1]
ADD R1, 1
MOV R3, [R1]
ADD R1, 1
MOV R4, [R1]
MOV R5, 7
PUSH R5
PUSH R2
PUSH R3
PUSH R4
PUSH R0
INT 6
POP R1
POP R2
POP R2
POP R2
POP R2
MOV R2, SP
MOV R3, 1
SUB R2, R3
MOV [R2], R1
RET
MOV R2, 10 //exit
PUSH R2
PUSH R2
PUSH R2
PUSH R2
PUSH R2
INT 10
RET
MOV R0, 1024
MOV R2, 2040
MOV R1, R0
ADD R1, 8
MOV [R0], R1
ADD R0, 8
LT R1, R2
JNZ R1, 164
MOV R0, 2040
MOV [R0], -1
MOV R0, SP
MOV R1, 1
SUB R0, R1
MOV [R0], 0
RET